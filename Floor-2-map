local function getGitSoundId(GithubSoundPath: string, AssetName: string): Sound
    local Url = GithubSoundPath

    if not isfile(AssetName..".mp3") then 
        writefile(AssetName..".mp3", game:HttpGet(Url)) 
    end

    local Sound = Instance.new("Sound")
    Sound.SoundId = getcustomasset(AssetName..".mp3", true)
    return Sound 
end

local CustomMusic = getGitSoundId("https://github.com/nervehammer1/throwawaystuff/raw/refs/heads/main/NightmareAmbient.mp3", "NightmareModeAmbient")
CustomMusic.Parent = game.Workspace
CustomMusic.Looped = true
CustomMusic.Volume = 2
CustomMusic:Play()

task.spawn(function()
    task.wait()
    if game:GetService("Lighting"):FindFirstChild("Atmosphere") then
        game.Lighting.Atmosphere:Destroy()
    end
    game.Lighting.FogColor = Color3.new(0.133333, 0.149020, 0.239216)
    game.Lighting.FogEnd = 55
    game.Lighting.FogStart = 0
end)

require(game.Players.LocalPlayer.PlayerGui.MainUI.Initiator.Main_Game).caption("Floor 2 theme recreate by localplayer loaded",true)

function convert(Room)
    task.wait(1.5)
    if Room:IsA("Model") then
        if tonumber(Room.Name) ~= nil then
            for _, v in pairs(Room.Parts:GetDescendants()) do
                if v:IsA("Part") or v:IsA("BasePart") or v:IsA("MeshPart") or v:IsA("UnionOperation") then
                    if v.Material == Enum.Material.Wood or v.Material == Enum.Material.WoodPlanks then
                        v.Color = Color3.fromRGB(60, 60, 60)
                        v.Material = Enum.Material.Limestone
                    end
                end
            end
        end
    end
end

coroutine.wrap(function()
    while true do
        wait(0.0005)
workspace.CurrentRooms[game.ReplicatedStorage.GameData.LatestRoom.Value].Door.Door.Open.SoundId = "rbxassetid://18754714998"
workspace.CurrentRooms[game.ReplicatedStorage.GameData.LatestRoom.Value]:FindFirstChild("Door"):FindFirstChild("Door").Material = "Rock"
workspace.CurrentRooms[game.ReplicatedStorage.GameData.LatestRoom.Value]:FindFirstChild("Door"):FindFirstChild("Door"):FindFirstChild("Sign").Material = "Rock"
    end
end)()

game.Workspace.CurrentRooms.ChildAdded:connect(convert)

convert(game.Workspace.CurrentRooms:GetChildren()[1])
convert(game.Workspace.CurrentRooms:GetChildren()[2])
